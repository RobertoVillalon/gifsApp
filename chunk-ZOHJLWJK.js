import{H as m,J as c,O as g,a as h,b as f,db as p,fa as e,o as n,ob as y}from"./chunk-JL2ZBQIJ.js";var s={production:!0,companyName:"Gifs",companyName2:"App",companySlogan:"Maneja tus gifs",giphyApiKey:"9H7afCWw7pEkeXE1IyNuIPENN1XMhti0",giphyUrl:"https://api.giphy.com/v1"};var a=class{static mapGhiphyItemToGif(i){return{id:i.id,title:i.title,url:i.images.original.url}}static mapGhiphyItemToGifArray(i){return i.map(this.mapGhiphyItemToGif)}};var G=class o{http=g(y);trendingGifs=e([]);searchGift=e([]);searchHistory=e({});searchHistoryKeys=p(()=>Object.keys(this.searchHistory()));trendingGifsLoading=e(!1);trendingPage=e(0);trendingGifsGroup=p(()=>{let i=[];for(let t=0;t<this.trendingGifs().length;t+=3)i.push(this.trendingGifs().slice(t,t+3));return i});constructor(){this.loadTrendingGifs(),this.loadSearch()}loadTrendingGifs(){this.trendingGifsLoading()||(this.trendingGifsLoading.set(!0),this.http.get(`${s.giphyUrl}/gifs/trending`,{params:{api_key:s.giphyApiKey,limit:20,offset:this.trendingPage()*20}}).subscribe(i=>{let t=a.mapGhiphyItemToGifArray(i.data);this.trendingGifs.update(r=>[...r,...t]),this.trendingPage.update(r=>r+1),this.trendingGifsLoading.set(!1)}))}loadSearchGift(i){return this.http.get(`${s.giphyUrl}/gifs/search`,{params:{q:i,api_key:s.giphyApiKey,limit:20}}).pipe(n(({data:t})=>t),n(t=>a.mapGhiphyItemToGifArray(t)),m(t=>{this.searchHistory.update(r=>f(h({},r),{[i.toLowerCase()]:t})),this.saveSearch()}))}getHistoryGifs(i){return this.searchHistory()[i]??[]}saveSearch(){localStorage.setItem("search",JSON.stringify(this.searchHistory()))}loadSearch(){let i=localStorage.getItem("search")??[];typeof i=="string"&&this.searchHistory.set(JSON.parse(i))}static \u0275fac=function(t){return new(t||o)};static \u0275prov=c({token:o,factory:o.\u0275fac,providedIn:"root"})};export{s as a,G as b};
